<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>文峰视听门户网站</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/bootstrap/css/bootstrap-submenu.min.css">
    <!-- 公共css -->
    <!-- <link rel="stylesheet" type="text/css" href="__PUBLIC__/CSS/base.css"> -->
    <!-- 自身css -->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/css/index1/index1.css">
	<script type="text/javascript" src="__PUBLIC__/bootstrap/js/jquery.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/bootstrap/js/bootstrap-submenu.min.js"></script>
    <!-- scroll-top & submenu -->
    <script type="text/javascript" src="__PUBLIC__/js/base.js"></script>
</head>
<body>
	 <header>
	 	{:W("Navigation/nav1")}
	 </header>
    
	 <div class="container">

	 	  <div class="panel panel-register">
	 	  	<div class="panel-headding">
	 	  		<h4>请输入个人信息</h4>
	 	  	</div>
	 	  	<div class="panel-body">
	 	  		<form action="{:U('registerInsert')}" class="form-horizontal" id="registerForm" method="post">
	 	  			{__TOKEN__}  

	 	  			<div class="form-group">
	 	  				<label for="#register_username" class="col-md-1 col-sm-2  control-label">username:</label>
	 	  				<div class="col-md-3 col-sm-5 ">
	 	  					<input type="text" class="form-control" name="username" id="register_username">
	 	  				</div>
	 	  			</div>
	 	  			<div class="form-group">
	 	  				<label for="#register_password" class="col-md-1 col-sm-2 control-label">password:</label>
	 	  				<div class="col-md-3 col-sm-5">
	 	  					<input type="password" class="form-control" name="password" id="register_password">
	 	  				</div>
	 	  			</div>
	 	  			<div class="form-group">
	 	  				<label for="#register_conPassword" class="col-md-1 col-sm-2 control-label">confirmPassword:</label>
	 	  				<div class="col-md-3 col-sm-5">
	 	  					<input type="password" class="form-control" name="confirmPassword" id="register_conPassword">
	 	  				</div>
	 	  			</div>
	 	  			<div class="form-group">
	 	  				<label for="#register_phone" class="col-md-1 col-sm-2 control-label">phone:</label>
	 	  				<div class="col-md-3 col-sm-5">
	 	  					<input type="text" class="form-control" name="phone" id="register_phone">
	 	  				</div>
	 	  			</div>

	 	  			<div class="form-group">
	 	  				<label for="#register_email" class="col-md-1 col-sm-2 control-label">email:</label>
	 	  				<div class="col-md-3 col-sm-5">
	 	  					<input type="text" class="form-control" name="email" id="register_email">
	 	  				</div>
	 	  			</div>

	 	  			<div class="form-group" >
	 	  				<label for="" class="col-md-1 col-sm-2 control-label">验证码图片</label>
	 	  				<div class="col-md-3  col-sm-5">
	 	  					<img src="{:U('Home/Index/Index/VerifyCode')}" onclick="this.src=this.src+'?'+Math.random()">
	 	  				</div>
	 	  			</div>
	 	  			<div class="form-group">

	 	  				<label for="#register_verifyCode" class="col-md-1 col-sm-2 control-label">请输入验证码:</label>
	 	  				<div class="col-md-3 col-sm-5">
	 	  					<input type="text" class="form-control" name="verifyCode" id="register_verifyCode">
	 	  				</div>
	 	  			</div>

	 	  			<div class="form-group">
	 	  				<label for="#register_address" class="col-md-1 col-sm-2 control-label">address:</label>
	 	  				<div class="col-md-4 col-sm-5">
	 	  					<input type="text" class="form-control" name="address" id="register_address">
	 	  				</div>
	 	  			</div>

	 	  			
	 	  			<dir class="form-group">
	 	  				<div class="alert" id="register_message"></div>
	 	  			</dir>

                    <button type="submit" class="btn btn-default col-md-offset-1 col-sm-offset-2">commit</button>&nbsp;&nbsp;&nbsp;
                    <a href="{:U('Home/Index/Index/index')}" class="btn btn-default">cancel</a>

	 	  		</form>

	 	  	</div>
	 	  </div>
	 </div>

	 <footer>
	 	{:W("Footer/footer")}
	 </footer>
</body>

<script>
	$.validator.setDefaults( {
			submitHandler: function ( form ) {
				// alert( "submitted!" );
				// $('#registerForm').submit(); 这样写会出现死循环
                form.submit();
			}
		} );



    $( document ).ready( function() {
	$formValidate = $( "#registerForm" ).validate( {
				rules: {
					
					username: {
						required: true,
						minlength: 2
					},
					password: {
						required: true,
						minlength: 5
					},
					confirmPassword: {
						required: true,
						minlength: 5,
						equalTo: "#register_password"
					},
					email: {
						required: true,
						email: true
					},
					// agree1: "required"
					verifyCode: {
						required: false
					}
				},
				messages: {
					username: {
						required: "Please enter a username",
						minlength: "Your username must consist of at least 2 characters"
					},
					password: {
						required: "Please provide a password",
						minlength: "Your password must be at least 5 characters long"
					},
					confirmPassword: {
						required: "Please provide a password",
						minlength: "Your password must be at least 5 characters long",
						equalTo: "Please enter the same password as above"
					},
					email: "Please enter a valid email address",
					// agree1: "Please accept our policy"
				},
				errorElement: "em",
				errorPlacement: function ( error, element ) {
					// Add the `help-block` class to the error element
					error.addClass( "help-block" );

					// Add `has-feedback` class to the parent div.form-group
					// in order to add icons to inputs
					element.parents( ".col-md-3" ).addClass( "has-feedback" );

					if ( element.prop( "type" ) === "checkbox" ) {
						error.insertAfter( element.parent( "label" ) );
					} else {
						error.insertAfter( element );
					}

					// Add the span element, if doesn't exists, and apply the icon classes to it.
					if ( !element.next( "span" )[ 0 ] ) {
						$( "<span class='glyphicon glyphicon-remove form-control-feedback'></span>" ).insertAfter( element );
					}
				},
				success: function ( label, element ) {
					// Add the span element, if doesn't exists, and apply the icon classes to it.
					if ( !$( element ).next( "span" )[ 0 ] ) {
						$( "<span class='glyphicon glyphicon-ok form-control-feedback'></span>" ).insertAfter( $( element ) );
					}
				},
				highlight: function ( element, errorClass, validClass ) {
					$( element ).parents( ".col-md-3" ).addClass( "has-error" ).removeClass( "has-success" );
					$( element ).next( "span" ).addClass( "glyphicon-remove" ).removeClass( "glyphicon-ok" );
				},
				unhighlight: function ( element, errorClass, validClass ) {
					$( element ).parents( ".col-md-3" ).addClass( "has-success" ).removeClass( "has-error" );
					$( element ).next( "span" ).addClass( "glyphicon-ok" ).removeClass( "glyphicon-remove" );
				}
			} );


	

     });

</script>

</html>